{% extends "base.html" %}
{% block title %}ORM Chits{% endblock %}
{% block content %}

<h1>Welcome to the ORM module, {{ cMid.fName }} {{ cMid.LName }}.</h1>

<h3>Enter an ORM Chit:</h3>

<form action="addLeisure" id="ormForm" method="post">
{% csrf_token %}
		<table border="1" cellpadding="1" cellspacing="0" style="width: 800px; " summary="ORM Safety Worksheet">
			<caption>
				ORM CHIT</caption>
			<tbody>
				<tr>
					<td>
						<label for="name">Name:</lable></td>
					<td colspan="2">
						<input type="text" id="name" value="{{ cMid.fName }} {{ cMid.LName }}" readonly="readonly"/></td>
					<td colspan="2">
						<label>Leave Address:</label></td>
				</tr>
				<tr>
					<td>
						<label for="departDate">Date of Departure:</label></td>
					<td>
						<input type = "text" class="datepicker" 
						id="departDate" readonly="readonly" name = "dateDepart"/></td>
					<td style="background-color: rgb(204, 204, 204); ">
						&nbsp;</td>
					<td rowspan="2">
						Street</td>
					<td>
						<input type = "text" name = "street1" /></td>
				</tr>
                <tr>
					<td>
						<label for="returnDate">Date of Return:</label></td>
					<td>
						<input type = "text" class="datepicker" 
						id="returnDate" readonly="readonly" 
						onchange="dateDiff();" name = "dateReturn"/></td>
					<td style="background-color: rgb(204, 204, 204); ">
						&nbsp;</td>
					<td>
						<input type = "text" name = "street2" /></td>
				</tr>
				<tr>
					<td>
						<label for="daysLeave">Total Days of Leave:</label></td>
					<td>
						<input type="text" id="daysLeave" readonly="readonly" /></td>
					<td style="background-color: rgb(204, 204, 204); ">
						&nbsp;</td>
					<td>
						City</td>
					<td>
						<input type="text" name="city" /></td>
				</tr>
				<tr>
					<td>
						<label for="daysTravel">Total Days of Travel:</label></td>
					<td>
						<select id="daysTravel" name="daysTravel" onchange="travelRatio();"/>
							<option value="0">0<option>
							<option value="1">1<option>
							<option value="2">2<option>
							<option value="3">3<option>
							<option value="4">4<option>
							<option value="5">5<option>
							<option value="6">6<option>
							<option value="7">7<option>
							<option value="8">8<option>
							<option value="9">9<option>
							<option value="10">10<option>
						</select>
					</td>
					<td style="background-color: rgb(204, 204, 204); ">
						&nbsp;</td>
					<td>
						State</td>
					<td>
						<input type = "text" name = "state" /></td>
				</tr>
				<tr>
					<td>
						<label for="travelRatio">Travel Ratio:</label></td>
					<td>
						<input type="text" id="travelRatio" readonly="readonly"/></td>
					<td style="background-color: rgb(204, 204, 204); ">
						&nbsp;</td>
					<td>
						Zip</td>
					<td>
						<input type = "text" name = "zip" /></td>
				</tr>
				<tr>
					<td colspan="4" rowspan="1">
						Travel Ratio should be less than 1/3 of your total leave period</td>
					<td>
						&nbsp;</td>
				</tr>
			</tbody>
		</table>
    <br /><br /><input type="submit" value="Add Leisure Activities" />
</form>

<h3>Past ORM Chits: </h3>
<table>
{% for p in lChits %}
    <tr>
        <form action="ormView" method = "post">
        {% csrf_token %}
        <td>{{ p.dateDepart }}</td>
        <td>{{ p.dateReturn }}</td>
        <td>{% if p.approvalStatus == 0 %}APPROVED
            {%else%}
                {% if p.approvalStatus == -1 %}DENIED{%endif%}
                {% if p.approvalStatus > 0 %}PENDING{%endif%}
            {%endif%}
        </td>
            <td><input type = "hidden" name = "id" value = "{{ p.id }}" />
                <input type = "submit" value = "View Chit" /></td>
        </form>
    </tr>
{% empty %}
    <tr><td>You have not submitted any ORM Chits.</td></tr>
{% endfor %}
</table>

{% endblock %}